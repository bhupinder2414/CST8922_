jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      # Checkout the code
      - name: Checkout code
        uses: actions/checkout@v2
      
      # Step 4: Deploy to Azure App Service
      - name: Deploy to Azure Web App
        uses: azure/webapps-deploy@v2
        with:
            app-name: team7-backend-app-unique-123  # Replace with your Azure App Service name
            publish-profile: ${{ secrets.AZURE_WEBAPP_PUBLISH_PROFILE }}  # Store your publish profile in GitHub secrets
            package: ./target/team7-0.0.1-SNAPSHOT.jar  # Path to your JAR file (generated by Maven)
        env:
            MYSQL_URL: ${{ secrets.MYSQL_URL }}
            MYSQL_USERNAME: ${{ secrets.MYSQL_USERNAME }}
            MYSQL_PASSWORD: ${{ secrets.MYSQL_PASSWORD }}
            API_SECURITY_TOKEN_SECRET: ${{ secrets.API_SECURITY_TOKEN_SECRET }}
